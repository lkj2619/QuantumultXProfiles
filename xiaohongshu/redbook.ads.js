/***********************************************
> 应用名称：墨鱼自用小红书去广告脚本
> 脚本作者：@ddgksf2013
> 微信账号：墨鱼手记
> 更新时间：2026-01-31
> 通知频道：https://t.me/ddgksf2021
> 贡献投稿：https://t.me/ddgksf2013_bot
> 特别提醒：如需转载请注明出处，谢谢合作！
***********************************************/

const version = 'V1.0.27';
const $ = new Env("小红书");
var _0xodr = 'jsjiami.com.v7'; const _0xb94527 = _0x42b1; function _0x3485() { const _0x43f5cb = (function () { return [_0xodr, 'QUAxjbsOjeUiIbQaFTymWkei.hrhcqoTCmTdO.v7==', 'sdLQWQlcGG', 'fCoiBSkXW5iQfv/dSgVdQa/cOCkNW4e', 'iMBdRmoeW7xdTaHeW4b5emo6vq', 'WPVdMKtdIa', 'fSkbWP1n', 'WR7cHeb1iK4', 'WRxcJcCEWPRdJSoC', 'cWCLW4j7WRXswxC', 'W405ua', 'W7BdJCotWPJdQSoD', 'W6bEWPxdMmkGwCkvW7JdO09NDG', 'W7NdLw9maKrkW6q', 'WQhcHebdkNv/W45OWQOEWPFdLSoAnSo1Ba', 'Bgv+ASkRc8orWRC7WPlcTSoF', 'WQVcHePpouT4W4PbWQySWPxdNSor', 'Bt3dRG', 'W6dcLMpcRCkmW5VdNrjSWQPdW7KtWQa', 'WR/cLvzdju1LW4LN', 'nmkzD8opW4uRAG', 'xL9WWP8PW6SumYaDWOCPca', 'WPZdI0xdMtCP', 'lWOXW61EW6mgxLTmW5G0', 'W6vWW4/cUCkLv8odEG', 'W6DHWOmbW7a', 'WPNcJCkcW70UDCkuWPNcGq', 'W7DfWPddN8kIuCkDW7RdHq', 'ACooWQXhwComjSkvt8kTz8khW7vXCui5', 'W5yKsdNdRX/dUG', 'W6jfwG', 'WQFcOCk5W44weCogfJC', 'W6ldT8kaWOJdQJXDWRbFWQjJevK', 'WRy4wmouW5r6', 'dSklWOK', 'mW4PW6vCW6m9D1nkW5q1wIpdJSoqW6G', 'AtpdUSkgWRzRx8kOwCoJW7XADCo1WOVdQCkP', 'WR0jqSoBWOy', 'WQdcJKm', 'WRZcGfzzlG', 'bCkbWPPDWPBdN3S', 'l8oezmkhW6iYexVdVxW', '5Por57wk56YK6kYy', 'W6RcJSo0h2GhDCoCtSocW6G4', 'j8oeW7RdQdNdIColW4OGEW', 'DmokWRPDxq', 'WRJcVmk9W4iNbSohhZRcQq', 'W5qLWOpdNmob', 'pJm9pq', 'uHGUzCkHW5C8fSkfW6a', 'WQFcT8ohW5BcSgmcWOvF', 'WPdcHsPSWQqFWRK', 'CSkkW5FcKa4mhKacWO9mWQPf', 'W5WQsd0', 'bq0SW4z/WO1vaIemWQ88k2z/WPyP', 'W6nLWOig', 'WOtcU8ofxHiGW4ZdM09kW6hcMJG', 'WQbSWONcRCkcW54HWROh', 'WQhcP8kN', 'i8kDD8okW5C', 'fbxdVq', 'WRVcIHddIa', 'WR7cJXC', 'W7KoFSojWOhdG8oa', 'pe/cJ8kjW45NW44AECkHWObJWOCqE1ldNG', 'WQbWWPRcTSkjW6yHWRiyW7W', 'WOFdNKtdOYqHW7jxW7Olumoisx1MemkT', 'W5e2WP0', 'ndm9nCoOxmoxWPi6WOpcMSoI', 'BtVdV8k8WPT+w8kMwCoP', 'zs3cTG', 'W6jEWPddS8kTvCkC', 'daK8W44', 'W5C0WP3dJSoxmCk1W5rkW6lcH8khWRZcLfS', 'dG7dTq'].concat((function () { return ['WQZdMmkXwJG', 'WR4CqSobWO3dTCoAamkB', 'WR3dNCkW', 'ASoDEIfC', 'W6VdL3O/W4xcK8o+cclcJ8kmsxpcTCkfW4WSWPa', 'W6BcNNxcU8kg', 'W5dcHSoQq8oMvmkOWOFcRq', 'laO2W7bnW7qgxuzj', 'W67cI8oZeg0ahmk/fSkl', 'W6ddL8oaWPpdQmoFfY9y', 'nSorWOpdJvHLrbHsW5e', 'qmkBWOxcKCo3vmoCmCkgzCoFWOG', 'nCoiBSkrW5iQfvBdRhZdQblcTCk0W5hdJtb9W6pdQ8k9W6G', 'tCowAYju', 'qCofWQldLeddMhpdI8knWQFdVSkGWQqrvmoqW6i', 'WQJcGGddJSogW4KuWOlcIa', 'DSoEymkYW5mRf8oGua', 'xdLSWRa', 'WPZdI0xdLtGJW7DqW7C', 'mSkFW70zdmkRy8kNqmkLDCkVW6G', 'dcamwSkhW48W', 'k8kzBComW5a3', 'nJ0U', 'CCozWQq', 'WRqMW5VcKSkUE8oxv2SvWPiVW4m', 'CSocWQXlv8ompmkAx8kNz8ksWQG', 'nZCKoCobsCoPWOC+WOVcNSoI', 'WRGOW4lcLG', 'ief9W6zAWQOq', 'W6L8W57cKmkqsSowqG', 'tSoUcmk7', 'umkFBG', 'uSk5tCo6', 'WRdcOSobW54', 'WPZcKmkuW7eVtCkBWPRcNqirWRFcRCk1', 'W7HDwmopWRVdHSoxfW', 'c8kxWQ9lWOxdIMm', 'WQJdNmkWxq', 'cqBdOSoNs8omuMfGW58SrWtdQCkaabq', 'WR3cOCkUW4Ol', 'ymkcW4FcLa', 'WOVdNKpdNq', 'W5ZdMbhcSq', 'WRJcRmos', 'W4b7WOarWPxcHaRcVq', 'nbKP', 'W5RdHaBcVmocxdvOeCo5AW', 'ofnRW6bGWReREItdQW', 'gXW6W4P/WR8', 'wCkBWPVcGa', 'W7ryWOhdGSk5rmkrW68', 'kgJdR8ofW77dTvLwW6DTb8on', 'BCkoW5lcKGqmaLWi', 'W6bqWPBdLW', 'W6Tir8kVka3cI1NdICkb', '5Poi57EH566H6kYp', 'nSkzW7GwaCkLzSocd8o5', 'W67dK28PW5JcKa', 'DauWvCkA', 'W5JdGmogWQb5k8olWRZcTYGEWOZcGW', 'WQKJtq', 'BCoFWQ1dsW', 'W7TVWPy', 'lqqKW6bbW6G+D11iW5W', 'yWuGWQqYW7PgxYhdSWXDhG', 'jmktBSogW4eXF10', 'daldTCorwa', 'WPVcN1FdQSkCCJDWjCozsW', 'WQdcPSogW4S', 'uquG', 'W6b5EubwAG', 'iSksz8o0W5a2zKS', 'W4VcJSoNrCo3BSk5WQRcPNuLWQJdT8oOW5JdMCk6', 'WRmdW5FcHCo9r8kfW7tdRx9r', 'bmknWOjCWQJdGN4'].concat((function () { return ['W7fYA1y', 'WRuTwmocW5a', 'wSkFE0TwW7Px', 'W5eaaYzyfq3cIshdUq', 'AmkkW4xcKd4Jh0eqWO8PW7W', 'W43dUSkFbhi', 'vSk9tmo9kq', 'sJ18WQxcKHNdQqlcIW', 'aaCLW4P4WRDdb3KfWPKPiq', 'bSknWP1vWP7dGh8', 'y8odFSkVW5G+', 'W6hdHSocWPxdTmom', 'W5ddPCo1WOJdGa', 'mSkoBW', 'WRNcGGJdNCogW48', 'n8omEmkaW5G', 'nuVcN8kb', 'W6jYWP0', 'vSkgW5FcTW48hh4mWO9NWRm8vhG', 'nmkfCmoFW4eYvf3cQYbjWRnRWPZdTmoi', 'y8oFFmk4W4KLeCoODSoWcCoSW4PVcG', 'sCkdBhW', 'WOzCWQ8nAvRcUr5NW4/dJrux', 'WOPuWRWe', 'Ed7cQCkVWR7cQfjMW7TsgCo/FW7cPcddGa', 'mvnSW7u', 'jvnQW6DG', 'CmoyFG', 'iuVcMCktW4O', 'WP1DWQKxygZcTXH1W78', 'D8kxW4hcNa80hKGD', 'mCoeBSkwW5iAdxNdVgRdQq', 'nCkzB8okW5a6B3hcQt1qWR57WQBcOmkDWPG', 'DsddRmk3WQbNxCkUf8kM', 'wmofWRxdIq', 'wLP4WPyUW6Cwu2fy', 'fW7dTCoDvSo2v2q', 'WQm5rmosW4f+g2RcOhz8jmkpxMu', 'lCoiW6/dQJVdLCoMW48SE8os', 'rmkZwSo3', 'bmkrWObAWOpdGNuSeSo1W5CHW6SymW', 'qmkBWOZcNCoj', 'W5CWWOpdHSokpSkdW5fC', 'WR7cJXFdTSoeW48iW43dMfi', 'mmkEwCk9W7qIomon', 'l8omECkSW48GeMJdRwRdQt/cJCkTW5FdJsy', 'WQenxSopWPFdUG', 'wmkrFw8', 'WO3cJGddQ8omW5imW67dGuxdS8kAm8oAWPG', 'WP/cISkvW6y', 'W4pdO8kxc0qSW5W', 'fW7dTCoDvSo2wM9JW5qKDWldOG', 'sSkBWPZcKmojumoC', 'WRJcGICEWQldImokFhhdQW', 'WOBcLSkx', 'W5NdNW4', 'ySkwW53cLHu6gea7WOv9WQGfwgqN', 'W6ZdN20UW4lcJmo6cq', 'WROGW4tcHmk8w8oCrYauWRu0W5VcQSoFugnWWQFdLLvwWRpcOmoEW7fIfWKu5PoE57sw56Yl6k6LaCkb', 'W6FdR8kxler5WPFdSx1CW7tcSqpcKmoo', 'WQ/dKCkIwZHQrCoHrSov', 'WQFcT8ouW4VcQ3C', 'nGOXW6fAW6S4wL96W4S4sIpdKmoeW7e/', 'sCkczq', 'WP1DWQedCq', 'WQBcSmkNW4yme8ollYNcQCkpW53dP2rBW7VcKq', 'oupcHCkuWPuy', 'dqJdTG', 'j0pcJ8kfW4bNW5SEASkGWR1HWOSv', 'oqmJW4DL', 'kmokW6K', 'WRBcHGxdJSogW6isW4RdHa', 'j1D5W6DQWQ0', 'qmkZtmollwHt']; }())); }())); }()); _0x3485 = function () { return _0x43f5cb; }; return _0x3485(); }; function _0x42b1(_0x55dfc0, _0x453f5d) { const _0x3485ff = _0x3485(); return _0x42b1 = function (_0x42b13c, _0x40d32b) { _0x42b13c = _0x42b13c - 0xea; let _0x56b8dd = _0x3485ff[_0x42b13c]; if (_0x42b1['xmBQVp'] === undefined) { var _0x3d4a22 = function (_0x4896c5) { const _0x351550 = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/='; let _0x196bf9 = '', _0x1e1808 = ''; for (let _0x2e8c34 = 0x0, _0x126986, _0xdee261, _0x328926 = 0x0; _0xdee261 = _0x4896c5['charAt'](_0x328926++); ~_0xdee261 && (_0x126986 = _0x2e8c34 % 0x4 ? _0x126986 * 0x40 + _0xdee261 : _0xdee261, _0x2e8c34++ % 0x4) ? _0x196bf9 += String['fromCharCode'](0xff & _0x126986 >> (-0x2 * _0x2e8c34 & 0x6)) : 0x0) { _0xdee261 = _0x351550['indexOf'](_0xdee261); } for (let _0x175cd4 = 0x0, _0x2eb52b = _0x196bf9['length']; _0x175cd4 < _0x2eb52b; _0x175cd4++) { _0x1e1808 += '%' + ('00' + _0x196bf9['charCodeAt'](_0x175cd4)['toString'](0x10))['slice'](-0x2); } return decodeURIComponent(_0x1e1808); }; const _0x2d512c = function (_0x27aff6, _0x51da34) { let _0x3b0392 = [], _0x39df94 = 0x0, _0x524b35, _0x21d3f5 = ''; _0x27aff6 = _0x3d4a22(_0x27aff6); let _0x2c2360; for (_0x2c2360 = 0x0; _0x2c2360 < 0x100; _0x2c2360++) { _0x3b0392[_0x2c2360] = _0x2c2360; } for (_0x2c2360 = 0x0; _0x2c2360 < 0x100; _0x2c2360++) { _0x39df94 = (_0x39df94 + _0x3b0392[_0x2c2360] + _0x51da34['charCodeAt'](_0x2c2360 % _0x51da34['length'])) % 0x100, _0x524b35 = _0x3b0392[_0x2c2360], _0x3b0392[_0x2c2360] = _0x3b0392[_0x39df94], _0x3b0392[_0x39df94] = _0x524b35; } _0x2c2360 = 0x0, _0x39df94 = 0x0; for (let _0x3fa5a0 = 0x0; _0x3fa5a0 < _0x27aff6['length']; _0x3fa5a0++) { _0x2c2360 = (_0x2c2360 + 0x1) % 0x100, _0x39df94 = (_0x39df94 + _0x3b0392[_0x2c2360]) % 0x100, _0x524b35 = _0x3b0392[_0x2c2360], _0x3b0392[_0x2c2360] = _0x3b0392[_0x39df94], _0x3b0392[_0x39df94] = _0x524b35, _0x21d3f5 += String['fromCharCode'](_0x27aff6['charCodeAt'](_0x3fa5a0) ^ _0x3b0392[(_0x3b0392[_0x2c2360] + _0x3b0392[_0x39df94]) % 0x100]); } return _0x21d3f5; }; _0x42b1['skTybO'] = _0x2d512c, _0x55dfc0 = arguments, _0x42b1['xmBQVp'] = !![]; } const _0x383221 = _0x3485ff[0x0], _0x3633f0 = _0x42b13c + _0x383221, _0x3173ac = _0x55dfc0[_0x3633f0]; return !_0x3173ac ? (_0x42b1['hIgUhD'] === undefined && (_0x42b1['hIgUhD'] = !![]), _0x56b8dd = _0x42b1['skTybO'](_0x56b8dd, _0x40d32b), _0x55dfc0[_0x3633f0] = _0x56b8dd) : _0x56b8dd = _0x3173ac, _0x56b8dd; }, _0x42b1(_0x55dfc0, _0x453f5d); } (function (_0x2791f1, _0x72f23f, _0x3be908, _0x21461e, _0x3839f3, _0x47862b, _0x54b6e4) { return _0x2791f1 = _0x2791f1 >> 0x5, _0x47862b = 'hs', _0x54b6e4 = 'hs', function (_0x52ae9b, _0x3814ca, _0x271494, _0x42243f, _0x22ca5d) { const _0x64f06d = _0x42b1; _0x42243f = 'tfi', _0x47862b = _0x42243f + _0x47862b, _0x22ca5d = 'up', _0x54b6e4 += _0x22ca5d, _0x47862b = _0x271494(_0x47862b), _0x54b6e4 = _0x271494(_0x54b6e4), _0x271494 = 0x0; const _0x3c20fd = _0x52ae9b(); while (!![] && --_0x21461e + _0x3814ca) { try { _0x42243f = parseInt(_0x64f06d(0x190, 'hrL%')) / 0x1 * (parseInt(_0x64f06d(0x1af, '$kGt')) / 0x2) + parseInt(_0x64f06d(0x1c5, '3FwP')) / 0x3 * (-parseInt(_0x64f06d(0x170, 'a(J7')) / 0x4) + parseInt(_0x64f06d(0x19f, 'a(J7')) / 0x5 * (-parseInt(_0x64f06d(0x140, 'QRat')) / 0x6) + -parseInt(_0x64f06d(0x151, 'dVst')) / 0x7 + parseInt(_0x64f06d(0x1bc, 'ghdo')) / 0x8 + parseInt(_0x64f06d(0x115, 'IvR5')) / 0x9 * (-parseInt(_0x64f06d(0x169, 'bI@*')) / 0xa) + parseInt(_0x64f06d(0x149, '%s6h')) / 0xb * (parseInt(_0x64f06d(0x1b7, 'ksDB')) / 0xc); } catch (_0x43f21f) { _0x42243f = _0x271494; } finally { _0x22ca5d = _0x3c20fd[_0x47862b](); if (_0x2791f1 <= _0x21461e) _0x271494 ? _0x3839f3 ? _0x42243f = _0x22ca5d : _0x3839f3 = _0x22ca5d : _0x271494 = _0x22ca5d; else { if (_0x271494 == _0x3839f3['replace'](/[IdWOUTebkQhFqrCAxy=]/g, '')) { if (_0x42243f === _0x3814ca) { _0x3c20fd['un' + _0x47862b](_0x22ca5d); break; } _0x3c20fd[_0x54b6e4](_0x22ca5d); } } } } }(_0x3be908, _0x72f23f, function (_0x21eb03, _0x2038a3, _0x7dab3d, _0x1c0c96, _0x46c8f8, _0x1e29f8, _0x5ce840) { return _0x2038a3 = '\x73\x70\x6c\x69\x74', _0x21eb03 = arguments[0x0], _0x21eb03 = _0x21eb03[_0x2038a3](''), _0x7dab3d = '\x72\x65\x76\x65\x72\x73\x65', _0x21eb03 = _0x21eb03[_0x7dab3d]('\x76'), _0x1c0c96 = '\x6a\x6f\x69\x6e', (0x1ccf9b, _0x21eb03[_0x1c0c96]('')); }); }(0x1880, 0x98389, _0x3485, 0xc6), _0x3485) && (_0xodr = `\x46f`); $[_0xb94527(0x124, 'bI@*')] = 'redbook_user_photo_key', $['RedBookVideoKey'] = _0xb94527(0x188, '5GBB'); let body = $response[_0xb94527(0x110, '&&p)')]; if (body) { switch (!![]) { case /api\/sns\/v\d+\/note\/widgets/[_0xb94527(0x1c7, 'tR8!')]($request[_0xb94527(0xfa, '7PD8')]): try { let obj = JSON[_0xb94527(0xef, '&&p)')](body); obj['data'] = {}, body = JSON[_0xb94527(0x163, 'dVst')](obj); } catch (_0x405938) { console[_0xb94527(0x1a7, 'dVst')](_0xb94527(0x18b, 'pYrU') + _0x405938); } break; case /api\/sns\/v\d+\/note\/live_photo\/save/['test']($request[_0xb94527(0x177, '$kGt')]): try { let obj = JSON['parse'](body); obj[_0xb94527(0x102, 'ghdo')][_0xb94527(0x16c, 'sB6B')] = JSON[_0xb94527(0x133, 'iQCu')]($['getdata']($['RedBookPhotoKey'])), body = JSON[_0xb94527(0x150, 'B[Ot')](obj); } catch (_0x5801b8) { console[_0xb94527(0x1b8, '7N]o')](_0xb94527(0xed, '$pz9') + _0x5801b8); } break; case /api\/sns\/v\d+\/note\/video\/save/['test']($request[_0xb94527(0xf6, 'sB6B')]): try { let obj = JSON[_0xb94527(0xf8, '5GBB')](body), tmp = JSON[_0xb94527(0x160, 'QTOJ')]($[_0xb94527(0x11d, 'Ol!p')]($['RedBookVideoKey'])); for (let module of tmp) { module['note_id'] == obj['data'][_0xb94527(0x139, 'fC66')] && (obj[_0xb94527(0x1a4, '$pz9')] = module); } body = JSON['stringify'](obj); } catch (_0x1f2b18) { console[_0xb94527(0x11f, 'ksDB')](_0xb94527(0x11b, 'bI@*') + _0x1f2b18); } break; case /api\/sns\/v\d+\/note\/comment\/list/[_0xb94527(0x136, 'T1wq')]($request['url']): try { let obj = JSON[_0xb94527(0x158, 'cpCT')](body); for (let module of obj[_0xb94527(0x179, 'xHZc')][_0xb94527(0x1bd, 'sB6B')]) { if (module[_0xb94527(0x122, '@7^o')]) { module[_0xb94527(0xfe, 'yapD')][_0xb94527(0x198, 'ghdo')] = module['user'][_0xb94527(0x138, 'cpCT')], delete module[_0xb94527(0x11a, 'ksDB')]['red_id']; for (let item of module[_0xb94527(0x1ae, '3FwP')]) { item['meme_package']?.[_0xb94527(0x1b0, '$pz9')] && (item[_0xb94527(0x162, 'hrL%')] = item[_0xb94527(0x187, 'Ol!p')][_0xb94527(0x182, 'rXxK')], item[_0xb94527(0x16b, 'B[Ot')] = item[_0xb94527(0x196, 'QRat')][_0xb94527(0x130, 'pYrU')]); } } } body = JSON[_0xb94527(0x18c, 'IvR5')](obj); } catch (_0xe555e8) { console[_0xb94527(0x12c, 'R3v%')](_0xb94527(0x13a, 'xHZc') + _0xe555e8); } break; case /api\/sns\/v\d+\/note\/redtube/[_0xb94527(0x1ad, 'Ol!p')]($request['url']): try { let obj = JSON[_0xb94527(0x14a, '7PD8')](body); for (let module of obj[_0xb94527(0x16e, 'pYrU')][_0xb94527(0x1a3, 'B[Ot')]) { module['related_goods_num'] && (module['related_goods_num'] = 0x0), module[_0xb94527(0x155, '6hSZ')] && (module[_0xb94527(0x101, '$kGt')] = ![]), module[_0xb94527(0x167, 'xHZc')] && (module[_0xb94527(0x13f, 'cpCT')] = { 'disable_save': ![], 'disable_watermark': !![], 'disable_weibo_cover': !![] }), module[_0xb94527(0x172, 'r5(d')] && (module[_0xb94527(0x106, 'U)rO')][_0xb94527(0x121, '$pz9')] = [{ 'type': _0xb94527(0x143, '^b&9') }, { 'type': _0xb94527(0x141, 'cpCT') }, { 'type': 'copy_link' }, { 'type': _0xb94527(0x175, 'QRat') }, { 'type': _0xb94527(0x108, '5GBB') }, { 'type': 'dislike' }, { 'type': _0xb94527(0xf4, 'q4h9') }, { 'type': _0xb94527(0x19e, 'ksDB') }]); } body = JSON[_0xb94527(0x17d, 'a(J7')](obj); } catch (_0x12788e) { console[_0xb94527(0x1c1, 'hrL%')](_0xb94527(0xf0, 'iQCu') + _0x12788e); } break; case /api\/sns\/v\d+\/note\/(tab|video)feed/[_0xb94527(0x137, '68yJ')]($request[_0xb94527(0x128, 'yapD')]): try { let obj = JSON['parse'](body), tmp = JSON[_0xb94527(0x15e, 'Awup')]($['getdata']($[_0xb94527(0x134, '5GBB')])), datas = [...tmp], modules = obj['data']['items'] || obj['data']; for (let module of modules) { module['related_goods_num'] && (module[_0xb94527(0x1c4, 'rXxK')] = 0x0); module[_0xb94527(0x1a2, 'R3v%')] && (module[_0xb94527(0x1a2, 'R3v%')] = ![]); module[_0xb94527(0x14d, 'Awup')] && (module['media_save_config'] = { 'disable_save': ![], 'disable_watermark': !![], 'disable_weibo_cover': !![] }); module['share_info'] && (module[_0xb94527(0x125, 'UVPi')]['function_entries'] = [{ 'type': _0xb94527(0x11c, 'R3v%') }, { 'type': 'generate_image' }, { 'type': 'copy_link' }, { 'type': _0xb94527(0x148, 'AwNn') }, { 'type': _0xb94527(0x1aa, 'f8ux') }, { 'type': _0xb94527(0xf2, '68yJ') }, { 'type': 'report' }, { 'type': _0xb94527(0x12d, 'NSKq') }]); Array[_0xb94527(0x1a0, '68yJ')](module[_0xb94527(0x10e, '7N]o')]) && module[_0xb94527(0xfd, 'IvR5')][_0xb94527(0xeb, 'yapD')](_0x35e666 => { const _0x11368b = _0xb94527; _0x35e666[_0x11368b(0x13c, 'q4h9')] = !![], delete _0x35e666[_0x11368b(0x1b5, '@7^o')]; }); if (module[_0xb94527(0x165, '$pz9')]?.[_0xb94527(0x17f, 'EIuz')]?.[_0xb94527(0x1ac, 'xHZc')]?.['h265']) { let idata = {}; idata[_0xb94527(0x126, 'dVst')] = 0x2, idata[_0xb94527(0x14e, '@&K9')] = module['id'], idata[_0xb94527(0x13d, '3FwP')] = module[_0xb94527(0x195, 'Awup')][_0xb94527(0x1be, 'R3v%')][_0xb94527(0x147, 'T1wq')][_0xb94527(0x19a, '&&p)')][0x0][_0xb94527(0x183, 'AwNn')], datas['push'](idata); } } while (datas[_0xb94527(0x117, 'a(J7')] > 0x64) { datas['shift'](); } $[_0xb94527(0x145, 'sB6B')](JSON['stringify'](datas), $[_0xb94527(0x119, 'pYrU')]), body = JSON['stringify'](obj); } catch (_0x655f05) { console[_0xb94527(0x12f, 'L!*g')]('videofeed:\x20' + _0x655f05); } break; case /api\/sns\/v\d+\/note\/feed/[_0xb94527(0x1a1, 'UVPi')]($request[_0xb94527(0xf6, 'sB6B')]): try { let obj = JSON[_0xb94527(0x181, '^b&9')](body); for (let module of obj[_0xb94527(0x166, '@&K9')]) { module[_0xb94527(0x12a, 'B[Ot')] && (module[_0xb94527(0x109, 'sB6B')] = 0x0); module[_0xb94527(0x116, '5GBB')] && (module['has_related_goods'] = ![]); Array['isArray'](module[_0xb94527(0x111, '68yJ')]) && module['function_switch'][_0xb94527(0x178, '3FwP')](_0x271b31 => { const _0x2d00c6 = _0xb94527; _0x271b31[_0x2d00c6(0x1c2, 'tR8!')] = !![], delete _0x271b31[_0x2d00c6(0x131, 'ghdo')]; }); if (module['note_list']) for (let item of module['note_list']) { item[_0xb94527(0x171, 'NSKq')] = { 'disable_save': ![], 'disable_watermark': !![], 'disable_weibo_cover': !![] }; } } body = JSON[_0xb94527(0x185, 'q4h9')](obj); } catch (_0x23ee8f) { console['log']('feed:\x20' + _0x23ee8f); } break; case /api\/sns\/v\d+\/note\/imagefeed/[_0xb94527(0x1c0, 'dVst')]($request[_0xb94527(0x128, 'yapD')]): try { let obj = JSON[_0xb94527(0x156, 'a(J7')](body), tmp = JSON['parse']($[_0xb94527(0x159, '68yJ')]($['RedBookPhotoKey'])), datas = [...tmp], modules = obj[_0xb94527(0x1a5, 'T1wq')][_0xb94527(0x1a3, 'B[Ot')] || obj[_0xb94527(0x100, 'U)rO')]; for (let module of modules) { module['related_goods_num'] && (module[_0xb94527(0x154, 'AwNn')] = 0x0); module['has_related_goods'] && (module[_0xb94527(0x173, 'T1wq')] = ![]); if (module['note_list']) for (let item of module['note_list']) { item[_0xb94527(0x18a, '4@Ix')] = { 'disable_save': ![], 'disable_watermark': !![], 'disable_weibo_cover': !![] }; if (item['images_list']) for (let it of item[_0xb94527(0x10f, 'L!*g')]) { if (it[_0xb94527(0x176, '6hSZ')]) { let idata = {}; idata[_0xb94527(0x10d, 'R3v%')] = it[_0xb94527(0x15f, 'B[Ot')]['media'][_0xb94527(0x1a8, 'g$UJ')], idata[_0xb94527(0x1c6, '68yJ')] = it['live_photo_file_id'], idata[_0xb94527(0x120, 'f8ux')] = it['live_photo'][_0xb94527(0x112, 'Ol!p')][_0xb94527(0x152, '7N]o')]['h265'][0x0][_0xb94527(0x1ab, 'ghdo')], datas[_0xb94527(0x1a6, 'f8ux')](idata); } } } } while (datas[_0xb94527(0x191, 'sB6B')] > 0x64) { datas[_0xb94527(0x129, 'U)rO')](); } $['setdata'](JSON[_0xb94527(0x16a, 'r5(d')](datas), $[_0xb94527(0xfb, '$pz9')]), body = JSON['stringify'](obj); } catch (_0x34c299) { console['log']('imagefeed:\x20' + _0x34c299); } break; case /api\/sns\/v\d+\/homefeed\/categories\?/['test']($request[_0xb94527(0x16d, 'R3v%')]): try { let obj = JSON['parse'](body); obj[_0xb94527(0x197, '%s6h')][_0xb94527(0x11e, 'fC66')] = obj['data'][_0xb94527(0x15d, 'L!*g')]['filter'](_0x1aeb84 => !(_0x1aeb84['oid'] == _0xb94527(0x194, '%s6h') || _0x1aeb84['oid'] == 'homefeed.sketch' || _0x1aeb84[_0xb94527(0x17b, 'R3v%')] == _0xb94527(0xf1, 'xHZc'))), body = JSON[_0xb94527(0x18e, 'T1wq')](obj); } catch (_0x258bc3) { console[_0xb94527(0x142, '6hSZ')]('categories:\x20' + _0x258bc3); } break; case /api\/sns\/v\d+\/search\/hint/['test']($request[_0xb94527(0x174, 'QTOJ')]): try { let obj = JSON[_0xb94527(0xea, '7N]o')](body); obj[_0xb94527(0xf9, 'NSKq')]?.[_0xb94527(0x1b2, 'kHUa')] && (obj['data'][_0xb94527(0x15a, '5GBB')] = [{ 'title': _0xb94527(0x15b, 'a(J7'), 'type': _0xb94527(0x123, '%s6h'), 'search_word': _0xb94527(0x1b3, 'dVst') }]), body = JSON[_0xb94527(0x14b, 'ksDB')](obj); } catch (_0x125a98) { console[_0xb94527(0x157, 'cpCT')](_0xb94527(0x12b, 'NSKq') + _0x125a98); } break; case /api\/sns\/v\d+\/search\/hot_list/['test']($request[_0xb94527(0x120, 'f8ux')]): try { let obj = JSON[_0xb94527(0x103, 'ghdo')](body); obj[_0xb94527(0x161, 'QRat')] = { 'scene': '', 'title': '', 'items': [], 'host': '', 'background_color': {}, 'word_request_id': '' }, body = JSON['stringify'](obj); } catch (_0x21f83b) { console[_0xb94527(0x192, 'QRat')]('hot_list:\x20' + _0x21f83b); } break; case /api\/sns\/v\d+\/search\/trending/[_0xb94527(0x10b, '4@Ix')]($request[_0xb94527(0x1a9, 'AwNn')]): try { let obj = JSON[_0xb94527(0x158, 'cpCT')](body); obj['data'] = { 'title': '', 'queries': [], 'type': '', 'word_request_id': '' }, body = JSON['stringify'](obj); } catch (_0x5c3beb) { console[_0xb94527(0x19b, 'yapD')](_0xb94527(0x10a, '6hSZ') + _0x5c3beb); } break; case /api\/sns\/v\d+\/system_service\/splash_config/[_0xb94527(0x19c, '&&p)')]($request[_0xb94527(0x13b, '@&K9')]): try { let obj = JSON[_0xb94527(0x105, 'NSKq')](body); obj[_0xb94527(0x118, 'yapD')][_0xb94527(0x114, 'pYrU')][_0xb94527(0x132, '&&p)')](_0x1298d3 => { const _0x4440e6 = _0xb94527, _0x3041d3 = { 'Jnuji': function (_0x50bdb3, _0x212f6b) { return _0x50bdb3 === _0x212f6b; }, 'CFGrF': _0x4440e6(0x12e, 'AwNn'), 'xpljY': _0x4440e6(0x1b4, 'Awup'), 'zHanX': _0x4440e6(0x184, 'UVPi') }; _0x1298d3['start_time'] = _0x4440e6(0x186, '$pz9'), _0x1298d3['end_time'] = _0x4440e6(0x10c, 'xHZc'), _0x1298d3[_0x4440e6(0x14f, 'kHUa')] && _0x1298d3[_0x4440e6(0x16f, 'pYrU')]['forEach'](_0x2e11b2 => { const _0x53dc06 = _0x4440e6; _0x3041d3[_0x53dc06(0x189, 'EIuz')](_0x53dc06(0x1b6, 'hrL%'), _0x3041d3[_0x53dc06(0xf5, 'q4h9')]) ? _0x54921f['data']?.[_0x246f0d] && delete _0x26c4ca[_0x53dc06(0x1a4, '$pz9')][_0x163afd] : (_0x2e11b2[_0x53dc06(0xec, 'P8zT')] = _0x3041d3[_0x53dc06(0xee, 'bI@*')], _0x2e11b2[_0x53dc06(0x1c3, 'sB6B')] = _0x3041d3['zHanX']); }); }), body = JSON[_0xb94527(0x107, '$pz9')](obj); } catch (_0x459367) { console['log'](_0xb94527(0x17a, 'QTOJ') + _0x459367); } break; case /api\/sns\/v\d+\/homefeed\?/['test']($request[_0xb94527(0x104, 'IvR5')]): try { let obj = JSON[_0xb94527(0x181, '^b&9')](body); obj[_0xb94527(0x18d, 'iQCu')] = obj['data'][_0xb94527(0xf7, 'pYrU')](_0x456c2b => !_0x456c2b['is_ads']), body = JSON[_0xb94527(0x144, 'cpCT')](obj); } catch (_0x3599d4) { console[_0xb94527(0x12c, 'R3v%')]('homefeed:\x20' + _0x3599d4); } break; case /api\/sns\/v\d+\/search\/notes\?/[_0xb94527(0x168, '7PD8')]($request[_0xb94527(0x193, 'Awup')]): try { let obj = JSON['parse'](body); obj['data'][_0xb94527(0x1b9, 'Awup')] = obj['data'][_0xb94527(0x1a3, 'B[Ot')][_0xb94527(0xf3, 'IvR5')](_0x478da5 => !_0x478da5[_0xb94527(0x17e, 'UVPi')]), body = JSON[_0xb94527(0x14c, '3FwP')](obj); } catch (_0x7e275a) { console[_0xb94527(0x1ba, '7PD8')]('search/notes:\x20' + _0x7e275a); } break; case /api\/sns\/v\d+\/system_service\/config\?/['test']($request['url']): try { let obj = JSON[_0xb94527(0x17c, 'UVPi')](body); const propertiesToDelete = ['store', 'splash', _0xb94527(0x1bb, 'AwNn'), 'app_theme', 'cmt_words', _0xb94527(0xff, 'U)rO')]; for (const prop of propertiesToDelete) { obj[_0xb94527(0x19d, 'dVst')]?.[prop] && delete obj[_0xb94527(0x1a5, 'T1wq')][prop]; } obj[_0xb94527(0x1b1, '3FwP')]?.[_0xb94527(0x127, 'AwNn')] && delete obj['data'][_0xb94527(0x180, '@7^o')], body = JSON[_0xb94527(0x113, 'QTOJ')](obj); } catch (_0x4e09b9) { console[_0xb94527(0x153, '68yJ')](_0xb94527(0xfc, 'sB6B') + _0x4e09b9); } break; default: $done({}); break; }$done({ 'body': body }); } else $done({}); var version_ = 'jsjiami.com.v7';
function Env(n, t) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((i, r) => { s.call(this, t, (t, e, s) => { t ? r(t) : i(e) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e) } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isShadowrocket() { return "undefined" != typeof $rocket } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; if (this.getdata(t)) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } lodash_get(t, e, s) { let i = t; for (const t of e.replace(/\[(\d+)\]/g, ".$1").split(".")) if (i = Object(i)[t], void 0 === i) return s; return i } lodash_set(t, i, e) { return Object(t) !== t || ((i = Array.isArray(i) ? i : i.toString().match(/[^.[\]]+/g) || []).slice(0, -1).reduce((t, e, s) => Object(t[e]) === t[e] ? t[e] : t[e] = Math.abs(i[s + 1]) >> 0 == +i[s + 1] ? [] : {}, t)[i[i.length - 1]] = e), t } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { var [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), s = s ? this.getval(s) : ""; if (s) try { const t = JSON.parse(s); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { var [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), n = this.getval(i), n = i ? "null" === n ? null : n || "{}" : "{}"; try { const e = JSON.parse(n); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { n = {}; this.lodash_set(n, r, t), s = this.setval(JSON.stringify(n), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isShadowrocket() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : null } setval(t, e) { return this.isSurge() || this.isShadowrocket() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : null } get(t, r = () => { }) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isShadowrocket() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, e, s) => { !t && e && (e.body = s, e.statusCode = e.status), r(t, e, s) })) : this.isQuanX() && (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { var { statusCode: t, statusCode: e, headers: s, body: i } = t; r(null, { status: t, statusCode: e, headers: s, body: i }, i) }, t => r(t))) } post(t, r = () => { }) { t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isShadowrocket() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, e, s) => { !t && e && (e.body = s, e.statusCode = e.status), r(t, e, s) })) : this.isQuanX() && (t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { var { statusCode: t, statusCode: e, headers: s, body: i } = t; r(null, { status: t, statusCode: e, headers: s, body: i }, i) }, t => r(t))) } time(t, e = null) { var s, e = e ? new Date(e) : new Date, i = { "M+": e.getMonth() + 1, "d+": e.getDate(), "H+": e.getHours(), "m+": e.getMinutes(), "s+": e.getSeconds(), "q+": Math.floor((e.getMonth() + 3) / 3), S: e.getMilliseconds() }; for (s in /(y+)/.test(t) && (t = t.replace(RegExp.$1, (e.getFullYear() + "").substr(4 - RegExp.$1.length))), i) new RegExp("(" + s + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[s] : ("00" + i[s]).substr(("" + i[s]).length))); return t } msg(t = n, e = "", s = "", i) { var r = t => { return t && ("string" == typeof t ? this.isShadowrocket() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0 : "object" == typeof t ? this.isShadowrocket() ? { openUrl: t.openUrl || t.url || t["open-url"], mediaUrl: t.mediaUrl || t["media-url"] } : this.isQuanX() ? { "open-url": t["open-url"] || t.url || t.openUrl, "media-url": t["media-url"] || t.mediaUrl } : this.isSurge() ? { url: t.url || t.openUrl || t["open-url"] } : void 0 : void 0) }; this.isMute || (this.isSurge() || this.isShadowrocket() ? $notification.post(t, e, s, r(i)) : this.isQuanX() && $notify(t, e, s, r(i))), this.isMuteLog || ((r = [""]).push(t), e && r.push(e), s && r.push(s), console.log(r.join("\n")), this.logs = this.logs.concat(r)) } log(...t) { 0 < t.length && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { !this.isSurge() && !this.isQuanX() && !this.isShadowrocket() ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(e) { return new Promise(t => setTimeout(t, e)) } done(t = {}) { (new Date).getTime(), this.startTime; (this.isSurge() || this.isQuanX() || this.isShadowrocket()) && $done(t) } }(n, t) }
